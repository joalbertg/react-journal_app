(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),o=a.n(c),i=a(5),u=a(14),l=a(15),s=a(7),m=a(28),d=a.n(m),p="[AUTH] LOGIN",f="[AUTH] LOGOUT",b="[UI] UI_SET_ERROR",E="[UI] UI_REMOVE_ERROR",h="[UI] UI_START_LOADING",v="[UI] UI_FINISH_LOADING",_="[NOTES] NOTES_ACTIVE",g="[NOTES] NOTES_LOAD",O="[NOTES] NOTES_UPDATED",j="[NOTES] NOTES_DELETE",y="[NOTES] NOTES_LOGOUT_CLEANING",N=function(e){return{type:b,payload:e}},w=function(){return{type:E}},k=function(){return{type:v}},x=a(6),I=a.n(x),S=a(9),C=a(16),T=a.n(C),L=a(23),D=a.n(L);a(67),a(70);D.a.initializeApp({apiKey:"AIzaSyDYFs-fFuGFXpDC3ui1C_L6ibz7EPYA4ac",authDomain:"udemy-journal-app.firebaseapp.com",databaseURL:"https://udemy-journal-app.firebaseio.com",projectId:"udemy-journal-app",storageBucket:"udemy-journal-app.appspot.com",messagingSenderId:"436566690299",appId:"1:436566690299:web:f25ac388ef939cd938235e"});var A=D.a.firestore(),U=new D.a.auth.GoogleAuthProvider,P=function(e,t){return function(a){a({type:h}),D.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user,n=t.uid,r=t.displayName;a(R(n,r)),a(k())})).catch((function(e){a(k()),T.a.fire("Error",e.message,"error")}))}},R=function(e,t){return{type:p,payload:{uid:e,displayName:t}}},G=R,z=function(){return{type:f}},F=a(4),W=function(){var e=Object(S.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.collection("".concat(t,"/journal/notes")).get();case 2:return a=e.sent,n={},a.forEach((function(e){n[e.id]=Object(F.a)({id:e.id},e.data())})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(S.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dear7hmry/upload",(a=new FormData).append("file",t),a.append("upload_preset","react-journal"),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dear7hmry/upload",{method:"POST",body:a});case 7:if(!(n=e.sent).ok){e.next=14;break}return e.next=11,n.json();case 11:return e.abrupt("return",e.sent);case 14:return e.next=16,n.json();case 16:throw e.sent;case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(4),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),H=function(e,t){return{type:_,payload:Object(F.a)({id:e},t)}},V=function(e){return{type:g,payload:e}},X=function(e){return function(){var t=Object(S.a)(I.a.mark((function t(a,n){var r,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.uid,delete(c=Object(F.a)({},e)).id,t.next=5,A.doc("".concat(r,"/journal/notes/").concat(e.id)).update(c);case 5:a(q(Object(F.a)({id:e.id},c))),T.a.fire("Saved",e.title,"success");case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},q=function(e){return{type:O,payload:e}},J=function(e){return{type:j,payload:{id:e}}},M=function(e){var t=e.note,a=t.id,n=t.title,c=t.body,o=t.date,u=t.url,l=d()(o),s=Object(i.b)();return r.a.createElement("div",{onClick:function(){s(H(a,t))},className:"journal__entry pointer animate__animated animate__fadeIn animate__faster"},u&&r.a.createElement("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(u,")")}}),r.a.createElement("div",{className:"journal__entry-body"},r.a.createElement("p",{className:"journal__entry-title"},n),r.a.createElement("p",{className:"journal__entry-content"},c)),r.a.createElement("div",{className:"journal__entry-date-box"},r.a.createElement("span",null,l.format("dddd")),r.a.createElement("h4",null,l.format("Do"))))},Y=function(){var e=Object(i.c)((function(e){return e.notes})).notes,t=Object.keys(e);return r.a.createElement("div",{className:"journal__entries"},t.map((function(t){return r.a.createElement(M,{key:t,note:e[t]})})))},K=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})).name;return r.a.createElement("aside",{className:"journal__sidebar"},r.a.createElement("div",{className:"journal__sidebar-navbar"},r.a.createElement("h3",{className:"mt-5"},r.a.createElement("i",{className:"far fa-moon"}),r.a.createElement("span",null," ",t)),r.a.createElement("button",{className:"btn",onClick:function(){e(function(){var e=Object(S.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.auth().signOut();case 2:t(z());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e({type:y})}},"Logout")),r.a.createElement("div",{onClick:function(){e(function(){var e=Object(S.a)(I.a.mark((function e(t,a){var n,r,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.uid,r={title:"",body:"",date:(new Date).getTime()},e.next=4,A.collection("".concat(n,"/journal/notes")).add(r);case 4:c=e.sent,t(H(c.id,r));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},className:"journal__new_entry"},r.a.createElement("i",{className:"far fa-calendar-plus fa-5x"}),r.a.createElement("p",{className:"mt-5"},"New entry")),r.a.createElement(Y,null))},Q=function(){return r.a.createElement("div",{className:"nothing__main-content"},r.a.createElement("p",null,"Select something",r.a.createElement("br",null),"Ipsum facere sit officiis quod?"),r.a.createElement("i",{className:"far fa-star fa-4x mt-5"}))},Z=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.notes})).active,a=d()(t.date),c=Object(n.useRef)();return r.a.createElement("div",{className:"notes__appbar"},r.a.createElement("span",null,a.format("Do dddd yyyy")),r.a.createElement("input",{ref:c,type:"file",style:{display:"none"},onChange:function(t){var a=t.target.files[0];a&&e(function(e){return function(){var t=Object(S.a)(I.a.mark((function t(a,n){var r,c,o,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().notes.active,T.a.fire({title:"Uploading...",text:"Please await...",allowOutsideClick:!1,onBeforeOpen:function(){T.a.showLoading()}}),t.next=4,B(e);case 4:c=t.sent,o=c.secure_url,i=c.original_filename,r.url=o,r.filename=i,T.a.close(),a(X(r));case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(a))}}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn",onClick:function(){c.current.click()}},"Picture"),r.a.createElement("button",{onClick:function(){e(X(t))},className:"btn"},"Save")))},$=a(17),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(u.a)(t,2),r=a[0],c=a[1],o=function(e){var t=e.target;c(Object(F.a)({},r,Object($.a)({},t.name,t.value)))},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)};return[r,o,i]},te=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.notes})).active,a=ee(t),c=Object(u.a)(a,3),o=c[0],l=c[1],s=c[2],m=o.title,d=o.body,p=Object(n.useRef)(t.id);Object(n.useEffect)((function(){p.current!==t.id&&(s(t),p.current=t.id)}),[s,t]),Object(n.useEffect)((function(){e(H(o.id,Object(F.a)({},o)))}),[o,e]);return r.a.createElement("div",{className:"notes__main-content"},r.a.createElement(Z,null),r.a.createElement("div",{className:"notes__content"},r.a.createElement("input",{className:"notes__title-input",type:"text",placeholder:"Some awesome title",autoComplete:"off",name:"title",value:m,onChange:l}),r.a.createElement("textarea",{className:"notes__textarea",placeholder:"What happened today",name:"body",value:d,onChange:l}),t.url&&r.a.createElement("div",{className:"notes__image"},r.a.createElement("img",{src:t.url,alt:t.filename}))),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){e(function(){var e=Object(S.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.uid,r=a().notes.active.id,e.next=4,A.doc("".concat(n,"/journal/notes/").concat(r)).delete();case 4:t(J(r));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}},"Delete"))},ae=function(){var e=Object(i.c)((function(e){return e.notes})).active;return r.a.createElement("div",{className:"journal__main-content animate__animated animate__fadeIn animate__faster"},r.a.createElement(K,null),r.a.createElement("main",null,e?r.a.createElement(te,null):r.a.createElement(Q,null)))},ne=function(){var e=Object(i.b)(),t=Object(n.useState)(!0),a=Object(u.a)(t,2),c=a[0],o=a[1],m=Object(n.useState)(!1),d=Object(u.a)(m,2),p=d[0],f=d[1];return Object(n.useEffect)((function(){D.a.auth().onAuthStateChanged((function(t){var a;(null===t||void 0===t?void 0:t.uid)?(e(G(t.uid,t.displayName)),e((a=t.uid,function(){var e=Object(S.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=V,e.next=4,W(a);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),f(!0)):f(!1),o(!1)}))}),[e,o,f]),c?r.a.createElement("h2",null,"Wait..."):r.a.createElement(l.a,{basename:"/"},r.a.createElement("div",null,r.a.createElement(s.d,null,r.a.createElement(oe,{path:"/auth",isLoggedIn:p,component:me}),r.a.createElement(ce,{isLoggedIn:p,exact:!0,path:"/",component:ae}),r.a.createElement(s.a,{to:"/auth/login"}))))},re=a(30),ce=function(e){var t=e.isLoggedIn,a=e.component,n=Object(re.a)(e,["isLoggedIn","component"]);return r.a.createElement(s.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(a,e):r.a.createElement(s.a,{to:"/auth/login"})}}))},oe=function(e){var t=e.isLoggedIn,a=e.component,n=Object(re.a)(e,["isLoggedIn","component"]);return r.a.createElement(s.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(s.a,{to:"/"}):r.a.createElement(a,e)}}))},ie=a(29),ue=a.n(ie),le=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.ui})),a=t.loading,n=t.msgError,c=ee({email:"joalbertgonzalez@gmail.com",password:"123456"}),o=Object(u.a)(c,3),s=o[0],m=o[1],d=o[2],p=s.email,f=s.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Login"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),(ue.a.isEmail(p)?f.length<6?(e(N("Password should be at least 6 characters")),0):(e(w()),1):(e(N("Email is not valid")),0))&&e(P(p,f)),d()},className:"animate__animated animate__fadeIn animate__faster"},n&&r.a.createElement("div",{className:"auth__alert-error"},n),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",className:"auth__input",value:p,onChange:m}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:f,onChange:m}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:a},"Login"),r.a.createElement("div",{className:"auth__social-networks"},r.a.createElement("p",null,"Login with social networks"),r.a.createElement("div",{onClick:function(){e((function(e){D.a.auth().signInWithPopup(U).then((function(t){var a=t.user,n=a.uid,r=a.displayName;e(R(n,r))}))}))},className:"google-btn"},r.a.createElement("div",{className:"google-icon-wrapper"},r.a.createElement("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})),r.a.createElement("p",{className:"btn-text"},r.a.createElement("b",null,"Sign in with google")))),r.a.createElement(l.b,{to:"/auth/register",className:"link"},"Create new account")))},se=function(){var e=ee({name:"joalbert",email:"joalbertgonzalez@gmail.com",password:"123456",password2:"123456"}),t=Object(u.a)(e,3),a=t[0],n=t[1],c=t[2],o=a.name,s=a.email,m=a.password,d=a.password2,p=Object(i.b)(),f=Object(i.c)((function(e){return e.ui})),b=f.loading,E=f.msgError,h=function(){return 0===o.trim().length?(p(N("Name is required")),!1):ue.a.isEmail(s)?m!==d||m.length<6?(p(N("Password should be at least 6 characters and match each other")),!1):(p(w()),!0):(p(N("Email is not valid")),!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Register"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h()&&p(function(e,t,a){return function(n){D.a.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=Object(S.a)(I.a.mark((function e(t){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.user,e.next=3,r.updateProfile({displayName:a});case 3:n(R(r.uid,r.displayName));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return T.a.fire("Error",e.message,"error")}))}}(s,m,o)),c()},className:"animate__animated animate__fadeIn animate__faster"},E&&r.a.createElement("div",{className:"auth__alert-error"},E),r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",autoComplete:"off",className:"auth__input",value:o,onChange:n}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",className:"auth__input",value:s,onChange:n}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:m,onChange:n}),r.a.createElement("input",{type:"password",placeholder:"Confirm",name:"password2",className:"auth__input",value:d,onChange:n}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block mb-5",disabled:b},"Register"),r.a.createElement(l.b,{to:"/auth/login",className:"link"},"Already register?")))},me=function(){return r.a.createElement("div",{className:"auth__main"},r.a.createElement("div",{className:"auth__box-container"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/auth/login",component:le}),r.a.createElement(s.b,{path:"/auth/register",component:se}),r.a.createElement(s.a,{to:"/auth/login"}))))},de=a(18),pe=a(55),fe={loading:!1,msgError:null},be={notes:[],active:null},Ee=Object(de.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case p:return{uid:n.uid,name:n.displayName};case f:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case b:return Object(F.a)({},e,{msgError:n});case E:return Object(F.a)({},e,{msgError:null});case h:return Object(F.a)({},e,{loading:!0});case v:return Object(F.a)({},e,{loading:!1});default:return e}},notes:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,a=arguments.length>1?arguments[1]:void 0,n=a.type,r=a.payload;switch(n){case _:var c=null;return c=(null===(e=t.active)||void 0===e?void 0:e.id)===r.id?Object(F.a)({},t.active,{},r):Object(F.a)({},r),Object(F.a)({},t,{active:c,notes:Object(F.a)({},t.notes,Object($.a)({},r.id,Object(F.a)({},r)))});case g:return Object(F.a)({},t,{notes:Object(F.a)({},r)});case O:return Object(F.a)({},t,{notes:Object(F.a)({},t.notes,Object($.a)({},r.id,Object(F.a)({},r)))});case j:return delete t.notes[r.id],Object(F.a)({},t,{active:null});case y:return{notes:{},active:null};default:return t}}}),he="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||de.d,ve=Object(de.e)(Ee,he(Object(de.a)(pe.a))),_e=function(){return r.a.createElement(i.a,{store:ve},r.a.createElement(ne,null))};a(148);o.a.render(r.a.createElement(_e,null),document.getElementById("root"))},56:function(e,t,a){e.exports=a(149)}},[[56,1,2]]]);
//# sourceMappingURL=main.82b1cfc7.chunk.js.map